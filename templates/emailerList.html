{% extends 'base.html' %}

{% block pagetitle %}
 - All Emailers
{% endblock pagetitle %}

{%block content %}
  <h1>List of Emailers</h1>


  <table id="myTable" class="tablesorter">
  <thead>
    <tr>
      <th>Name</th>
      {% for category in categories %}
      <th>{{ category.name }}</th>
      {% endfor %}
      <th>Total</th>
      <th>Team</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
   {% for emailer in emailers %}
    <tr class="{% if forloop.counter|divisibleby:2 %}even{% else %}odd{% endif %}">
      <td>{{emailer}}</td>
      {% for stat in emailer.stats_list %}
      <td class="center">{{ stat.stat }}</td>
      {% endfor %}
      <td class="center">{{ emailer.stats_total }}</td>
      <td>{% if emailer.owned_by_icon %}<img src="{{STATIC_URL}}/img/team-logos/small/{{ emailer.owned_by_icon }}" /> {% endif %}{{ emailer.owned_by }}</td>
      {% if emailer.player_set.all|length == 0 %}
        <td><a class="btn btn-mini btn-success" href="/add/{{ emailer.id }}">Recruit this emailer</a></td>
      {% else %}
        {% if emailer.owns_player %}
          <td><a class="btn btn-mini btn-danger" href="/remove/{{ emailer.id }}">Cut this emailer</a></td>
        {% else %}
          <td></td>
        {% endif %}
      {% endif %}
      </td>
    </tr>
  {%endfor%}
  </tbody>
  </table>

{%endblock%}

{% block styles %}
  <link rel="stylesheet" href="{{STATIC_URL}}tablesorter/themes/blue/style.css" media="screen" />
{% endblock %}

{% block scripts %}
<script src="{{STATIC_URL}}js/jquery.timeago.js"></script>
<script src="{{STATIC_URL}}tablesorter/jquery.tablesorter.min.js"></script>
<script>
  jQuery(document).ready(function() {
    jQuery("abbr.timeago").timeago();

    $("#myTable").tablesorter({ }); 
  });
</script>
{% endblock %}

